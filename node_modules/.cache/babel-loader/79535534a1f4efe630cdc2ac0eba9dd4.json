{"ast":null,"code":"import _regeneratorRuntime from\"/Users/JulianDomke/dev_projects/crm-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/JulianDomke/dev_projects/crm-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/JulianDomke/dev_projects/crm-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch}from'react-redux';import{storeResponseAction}from'../redux/actions';import SearchSuggestions from'./SearchSuggestions';import axios from'axios';var SearchContainer=function SearchContainer(){var dispatch=useDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),filters=_useState4[0],setFilters=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),multilayer=_useState6[0],setMultilayer=_useState6[1];useEffect(function(){// Flag for throtteling api requests\nvar ignore=false;function getFilters(){return _getFilters.apply(this,arguments);}function _getFilters(){_getFilters=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,filters;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(query){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return axios.get(\"http://api.createmusic.com/search?search=\".concat(query,\"&mutliLayerOnly=\").concat(multilayer));case 4:_yield$axios$get=_context.sent;filters=_yield$axios$get.data.filters;if(!ignore){setFilters(filters);}case 7:case\"end\":return _context.stop();}}},_callee);}));return _getFilters.apply(this,arguments);}getFilters();return function(){// when user types a new letter, ignore the previous request.\nignore=true;};},[query,multilayer]);// find music and dispatch it to store\nvar findMusic=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e,filterItem){var _yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();// If no filter item is clicked, use the typed-in query\nif(!filterItem){filterItem=query;}// get Data\n_context2.next=4;return axios.get(\"http://api.createmusic.com/search?search=\".concat(filterItem,\"&mutliLayerOnly=\").concat(multilayer));case 4:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;if(data){console.log(data);dispatch(storeResponseAction(data));}case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function findMusic(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"aside\",{className:\"container-search\"},/*#__PURE__*/React.createElement(\"div\",{className:\"search-tool\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Search Music\"),/*#__PURE__*/React.createElement(\"form\",{id:\"search-form\",onSubmit:findMusic},/*#__PURE__*/React.createElement(\"input\",{autocomplete:\"off\",type:\"text\",id:\"search-input\",value:query,onChange:function onChange(e){setQuery(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",{for:\"multilayer\",className:\"checkbox-label\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",name:\"multilayer\",id:\"multilayer\",onChange:function onChange(e){// Set multilayer flag upon clicking\nvar mutliLayerFlag=e.target.checked?1:0;setMultilayer(mutliLayerFlag);}}),/*#__PURE__*/React.createElement(\"span\",{className:\"checkbox\"}),\"Multilayer\"),filters&&/*#__PURE__*/React.createElement(SearchSuggestions,{filters:filters,findMusic:findMusic,setQuery:setQuery}))));};export default SearchContainer;","map":{"version":3,"sources":["/Users/JulianDomke/dev_projects/crm-react/src/Components/SearchContainer.js"],"names":["React","useEffect","useState","useDispatch","storeResponseAction","SearchSuggestions","axios","SearchContainer","dispatch","query","setQuery","filters","setFilters","multilayer","setMultilayer","ignore","getFilters","get","data","findMusic","e","filterItem","preventDefault","console","log","target","value","mutliLayerFlag","checked"],"mappings":"6dAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,aAA5B,CAEA,OAASC,mBAAT,KAAoC,kBAApC,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qBAA9B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1B,GAAMC,CAAAA,QAAQ,CAAGL,WAAW,EAA5B,CAD0B,cAEAD,QAAQ,CAAC,EAAD,CAFR,wCAEnBO,KAFmB,eAEZC,QAFY,8BAGIR,QAAQ,CAAC,IAAD,CAHZ,yCAGnBS,OAHmB,eAGVC,UAHU,8BAIUV,QAAQ,CAAC,KAAD,CAJlB,yCAInBW,UAJmB,eAIPC,aAJO,eAM1Bb,SAAS,CAAC,UAAM,CACZ;AACA,GAAIc,CAAAA,MAAM,CAAG,KAAb,CAFY,QAIGC,CAAAA,UAJH,wIAIZ,mKAESP,KAFT,uFAScH,CAAAA,KAAK,CAACW,GAAN,oDACsCR,KADtC,4BAC8DI,UAD9D,EATd,uCAQgBF,OARhB,kBAQQO,IARR,CAQgBP,OARhB,CAYI,GAAI,CAACI,MAAL,CAAa,CACTH,UAAU,CAACD,OAAD,CAAV,CACH,CAdL,sDAJY,6CAqBZK,UAAU,GAEV,MAAO,WAAM,CACT;AACAD,MAAM,CAAG,IAAT,CACH,CAHD,CAIH,CA3BQ,CA2BN,CAACN,KAAD,CAAQI,UAAR,CA3BM,CAAT,CA6BA;AACA,GAAMM,CAAAA,SAAS,0FAAG,kBAAOC,CAAP,CAAUC,UAAV,iJACdD,CAAC,CAACE,cAAF,GAEA;AACA,GAAI,CAACD,UAAL,CAAiB,CACbA,UAAU,CAAGZ,KAAb,CACH,CAED;AARc,uBASSH,CAAAA,KAAK,CAACW,GAAN,oDACyBI,UADzB,4BACsDR,UADtD,EATT,yCASNK,IATM,mBASNA,IATM,CAYd,GAAIA,IAAJ,CAAU,CACNK,OAAO,CAACC,GAAR,CAAYN,IAAZ,EACAV,QAAQ,CAACJ,mBAAmB,CAACc,IAAD,CAApB,CAAR,CACH,CAfa,wDAAH,kBAATC,CAAAA,SAAS,gDAAf,CAkBA,mBACI,6BAAO,SAAS,CAAC,kBAAjB,eACI,2BAAK,SAAS,CAAC,aAAf,eACI,6CADJ,cAEI,4BAAM,EAAE,CAAC,aAAT,CAAuB,QAAQ,CAAEA,SAAjC,eACI,6BACI,YAAY,CAAC,KADjB,CAEI,IAAI,CAAC,MAFT,CAGI,EAAE,CAAC,cAHP,CAII,KAAK,CAAEV,KAJX,CAKI,QAAQ,CAAE,kBAAAW,CAAC,CAAI,CACXV,QAAQ,CAACU,CAAC,CAACK,MAAF,CAASC,KAAV,CAAR,CACH,CAPL,EADJ,cAUI,6BAAO,GAAG,CAAC,YAAX,CAAwB,SAAS,CAAC,gBAAlC,eACI,6BACI,IAAI,CAAC,UADT,CAEI,IAAI,CAAC,YAFT,CAGI,EAAE,CAAC,YAHP,CAII,QAAQ,CAAE,kBAAAN,CAAC,CAAI,CACX;AACA,GAAMO,CAAAA,cAAc,CAAGP,CAAC,CAACK,MAAF,CAASG,OAAT,CAAmB,CAAnB,CAAuB,CAA9C,CACAd,aAAa,CAACa,cAAD,CAAb,CACH,CARL,EADJ,cAWI,4BAAM,SAAS,CAAC,UAAhB,EAXJ,cAVJ,CAwBKhB,OAAO,eACJ,oBAAC,iBAAD,EACI,OAAO,CAAEA,OADb,CAEI,SAAS,CAAEQ,SAFf,CAGI,QAAQ,CAAET,QAHd,EAzBR,CAFJ,CADJ,CADJ,CAuCH,CA7FD,CA+FA,cAAeH,CAAAA,eAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { storeResponseAction } from '../redux/actions';\nimport SearchSuggestions from './SearchSuggestions';\nimport axios from 'axios';\n\nconst SearchContainer = () => {\n    const dispatch = useDispatch();\n    const [query, setQuery] = useState('');\n    const [filters, setFilters] = useState(null);\n    const [multilayer, setMultilayer] = useState(false);\n\n    useEffect(() => {\n        // Flag for throtteling api requests\n        let ignore = false;\n\n        async function getFilters() {\n            // Don't make a request if there is no query.\n            if (!query) {\n                return;\n            }\n\n            // Get data from API, set to state\n            const {\n                data: { filters },\n            } = await axios.get(\n                `http://api.createmusic.com/search?search=${query}&mutliLayerOnly=${multilayer}`\n            );\n            if (!ignore) {\n                setFilters(filters);\n            }\n        }\n\n        getFilters();\n\n        return () => {\n            // when user types a new letter, ignore the previous request.\n            ignore = true;\n        };\n    }, [query, multilayer]);\n\n    // find music and dispatch it to store\n    const findMusic = async (e, filterItem) => {\n        e.preventDefault();\n\n        // If no filter item is clicked, use the typed-in query\n        if (!filterItem) {\n            filterItem = query;\n        }\n\n        // get Data\n        const { data } = await axios.get(\n            `http://api.createmusic.com/search?search=${filterItem}&mutliLayerOnly=${multilayer}`\n        );\n        if (data) {\n            console.log(data);\n            dispatch(storeResponseAction(data));\n        }\n    };\n\n    return (\n        <aside className=\"container-search\">\n            <div className=\"search-tool\">\n                <h3>Search Music</h3>\n                <form id=\"search-form\" onSubmit={findMusic}>\n                    <input\n                        autocomplete=\"off\"\n                        type=\"text\"\n                        id=\"search-input\"\n                        value={query}\n                        onChange={e => {\n                            setQuery(e.target.value);\n                        }}\n                    />\n                    <label for=\"multilayer\" className=\"checkbox-label\">\n                        <input\n                            type=\"checkbox\"\n                            name=\"multilayer\"\n                            id=\"multilayer\"\n                            onChange={e => {\n                                // Set multilayer flag upon clicking\n                                const mutliLayerFlag = e.target.checked ? 1 : 0;\n                                setMultilayer(mutliLayerFlag);\n                            }}\n                        />\n                        <span className=\"checkbox\"></span>\n                        Multilayer\n                    </label>\n                    {filters && (\n                        <SearchSuggestions\n                            filters={filters}\n                            findMusic={findMusic}\n                            setQuery={setQuery}\n                        />\n                    )}\n                </form>\n            </div>\n        </aside>\n    );\n};\n\nexport default SearchContainer;\n"]},"metadata":{},"sourceType":"module"}