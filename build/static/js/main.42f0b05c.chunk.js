(this["webpackJsonpcreate-music-codingtest"]=this["webpackJsonpcreate-music-codingtest"]||[]).push([[0],{25:function(e,t,a){e.exports=a(58)},53:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(7),l=a.n(r),s=a(6),i=a.n(s),u=a(9),o=a(3),m=a(1);function f(e){return{type:"SET_CURRENT_PLAYTIME",currentPlaytime:e}}var E=function(e){var t=e.filters,a=e.findMusic,n=e.setQuery;if(!t)return console.log("no filters"),null;var r=t.Alben,l=t.Instrument,s=t.Keyword,i=t.ProductionType,u=t.Style;return c.a.createElement("div",{id:"suggestions",className:"search-suggestions"},s&&0!=s.length&&c.a.createElement("div",{className:"suggestion",id:"keywords"},c.a.createElement("h3",null,"Keywords"),c.a.createElement("ul",{id:"list-keywords"},s.slice(0,15).map((function(e){return c.a.createElement("li",{className:"suggestion-item",key:e,onClick:function(e){a(e,e.target.textContent),n(e.target.textContent)}},e)})))),r&&0!=r.length&&c.a.createElement("div",{className:"suggestion",id:"albums"},c.a.createElement("h3",null,"Albums"),c.a.createElement("ul",{id:"list-albums"},r.slice(0,15).map((function(e){return c.a.createElement("li",{className:"suggestion-item",key:e,onClick:function(e){a(e,e.target.textContent),n(e.target.textContent)}},e)})))),l&&0!=l.length&&c.a.createElement("div",{className:"suggestion",id:"instruments"},c.a.createElement("h3",null,"Instruments"),c.a.createElement("ul",{id:"list-instruments"},l.slice(0,15).map((function(e){return c.a.createElement("li",{className:"suggestion-item",key:e,onClick:function(e){a(e,e.target.textContent),n(e.target.textContent)}},e)})))),u&&0!=u.length&&c.a.createElement("div",{className:"suggestion",id:"styles"},c.a.createElement("h3",null,"Styles"),c.a.createElement("ul",{id:"list-styles"},u.slice(0,15).map((function(e){return c.a.createElement("li",{className:"suggestion-item",key:e,onClick:function(e){a(e,e.target.textContent),n(e.target.textContent)}},e)})))),i&&0!=i.length&&c.a.createElement("div",{className:"suggestion",id:"production"},c.a.createElement("h3",null,"Production"),c.a.createElement("ul",{id:"list-productions"},i.slice(0,15).map((function(e){return c.a.createElement("li",{className:"suggestion-item",key:e,onClick:function(e){a(e,e.target.textContent),n(e.target.textContent)}},e)})))))},d=a(5),p=a.n(d),g=function(){var e=Object(m.b)(),t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(null),f=Object(o.a)(s,2),d=f[0],g=f[1],v=Object(n.useState)(!1),h=Object(o.a)(v,2),b=h[0],y=h[1];Object(n.useEffect)((function(){var e=!1;function t(){return(t=Object(u.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,p.a.get("http://api.createmusic.com/search?search=".concat(r,"&mutliLayerOnly=").concat(b));case 4:a=t.sent,n=a.data.filters,e||g(n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}}),[r,b]);var O=function(){var t=Object(u.a)(i.a.mark((function t(a,n){var c,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n||(n=r),t.next=4,p.a.get("http://api.createmusic.com/search?search=".concat(n,"&mutliLayerOnly=").concat(b));case 4:c=t.sent,(l=c.data)&&(console.log(l),e({type:"STORE_RESPONSE",lastResponse:l}));case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return c.a.createElement("aside",{className:"container-search"},c.a.createElement("div",{className:"search-tool"},c.a.createElement("h3",null,"Search Music"),c.a.createElement("form",{id:"search-form",onSubmit:O},c.a.createElement("input",{autocomplete:"off",type:"text",id:"search-input",value:r,onChange:function(e){l(e.target.value)}}),c.a.createElement("label",{for:"multilayer",className:"checkbox-label"},c.a.createElement("input",{type:"checkbox",name:"multilayer",id:"multilayer",onChange:function(e){var t=e.target.checked?1:0;y(t)}}),c.a.createElement("span",{className:"checkbox"}),"Multilayer"),d&&c.a.createElement(E,{filters:d,findMusic:O,setQuery:l}))))},v=function(e){var t=e.track,a=Object(m.b)(),r=Object(n.useRef)(null),l=Object(m.c)((function(e){return e.currentPlaytime})),s=Object(m.c)((function(e){return e.currentTrack||{}})),i=Object(m.c)((function(e){return e.waveformPercentage})),u=Object(n.useState)(0),E=Object(o.a)(u,2),d=E[0],p=E[1];Object(n.useEffect)((function(){if(t.cueID!=s.cueID)return p(0);if(r){r.current.getBoundingClientRect();p(l),p(i)}}),[s,l,i]);return c.a.createElement("div",{className:"content-result"},c.a.createElement("div",{className:"content-description"},c.a.createElement("h3",null,t.cueName),c.a.createElement("p",null,t.albumName)),c.a.createElement("div",{onClick:function(e){var n=r.current.getBoundingClientRect(),c=e.clientX-n.left;a(function(e){return{type:"SET_CURRENT_TRACK",currentTrack:e}}(t)),a(f(100*c/n.width))},className:"content-waveform-container",ref:r},c.a.createElement("img",{class:"content-waveform",src:t.waveformPreview,alt:"waveform",style:{clipPath:"inset(0 0 0 ".concat(d,"%)")}}),c.a.createElement("img",{class:"content-waveform-overlay",src:t.waveformPreview,alt:"",style:{clipPath:"inset(0 ".concat(100-d,"% 0 0)")}})),c.a.createElement("p",{className:"content-tags"},t.cueStyles.join(", ")))},h=function(){var e=Object(m.c)((function(e){return e.response&&e.response.cueData})),t=Object(m.c)((function(e){return e.response&&e.response.searchCueIDs})),a=Object(n.useState)([]),r=Object(o.a)(a,2),l=r[0],s=r[1];return Object(n.useEffect)((function(){if(t){var a=t.slice(0,50).map((function(t){return e[t]}));s(a)}}),[t]),c.a.createElement("main",{id:"content-results",className:"content-results"},l&&l.map((function(e){return c.a.createElement(v,{track:e})})))},b=function(){var e=Object(m.b)(),t=Object(n.useRef)({}),a=Object(n.useRef)({}),r=Object(m.c)((function(e){return e.currentTrack})),l=Object(m.c)((function(e){return e.currentPlaytime||0})),s=Object(n.useState)(0),i=Object(o.a)(s,2),u=i[0],E=i[1],d=Object(n.useState)(!1),p=Object(o.a)(d,2),g=p[0],v=p[1];Object(n.useEffect)((function(){var e=a.current;e&&r&&(e.currentTime=r.fullDuration*(l/100)/1e3,E(l))}),[l,a,r]),Object(n.useEffect)((function(){var t=a.current;t&&r&&(t.addEventListener("ended",(function(){t.pause(),t.currentTime=0})),t.addEventListener("play",(function(){v(!0)})),t.addEventListener("timeupdate",(function(){var a=100*t.currentTime*1e3/r.fullDuration;E(a),e({type:"SET_WAVEFORM_COLOR",waveformPercentage:a})})))}),[a,r]);return c.a.createElement("div",{id:"content-player",className:"content-player"},c.a.createElement("div",{className:"content-player-button"},c.a.createElement("i",{onClick:function(){if(r){var e=a.current;g?(v(!1),e.pause()):(v(!0),e.play())}},id:"audio-play",className:g?"far fa-pause-circle fa-2x":"far fa-play-circle fa-2x"}),c.a.createElement("i",{onClick:function(){g&&(v(!1),a.current.pause(),a.current.currentTime=0)},id:"audio-stop",className:"far fa-stop-circle fa-2x",style:g?{color:"var(--color-text)"}:{color:"var(--color-light)"}})),r&&c.a.createElement("div",{onClick:function(a){var n=t.current.getBoundingClientRect(),c=a.clientX-n.left;e(f(100*c/n.width))},className:"content-waveform-container",ref:t},c.a.createElement("img",{class:"content-waveform",src:r.waveformPreview,alt:"waveform",style:{clipPath:"inset(0 0 0 ".concat(u,"%)")}}),c.a.createElement("img",{class:"content-waveform-overlay",src:r.waveformPreview,alt:"",style:{clipPath:"inset(0 ".concat(100-u,"% 0 0)")}}),c.a.createElement("audio",{autoplay:"true",src:r.fullLengthPreview,ref:a})))},y=function(){return c.a.createElement("div",{className:"container-content"},c.a.createElement("nav",null,c.a.createElement("div",{class:"logo-wrapper"},c.a.createElement("img",{className:"logo-image",src:"https://www.createmusic.com/wp-content/themes/Avada-Child-Theme/images/CM-logo-final-white_wide.svg",alt:"CREATE MUSIC APP"})),c.a.createElement("ul",{className:"menu-profile"},c.a.createElement("li",{id:"login"},"Login"),c.a.createElement("li",{id:"menu"},"Menu"),c.a.createElement("li",{id:"icon"},c.a.createElement("i",{className:"fas fa-user-circle fa-2x"})))),c.a.createElement("section",{className:"content-main"},c.a.createElement("header",{className:"content-filter"},c.a.createElement("h3",null,"Search Results ",c.a.createElement("span",{id:"num-results"})),c.a.createElement("ul",{id:"content-filters",className:"content-filter-list"},c.a.createElement("li",{className:"filter-active",id:"filter-tracks"},"Tracks"),c.a.createElement("li",{id:"filter-albums"},"Albums"),c.a.createElement("li",{id:"filter-favorites"},"Favorites"),c.a.createElement("li",{id:"filter-playlists"},"Playlists"))),c.a.createElement("hr",{className:"content-separator"}),c.a.createElement(h,null),c.a.createElement("hr",{className:"content-separator"}),c.a.createElement(b,null)))},O=(a(53),a(4)),N=a(23),j=a.n(N),w=a(24),C=Object(O.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"STORE_RESPONSE"==t.type?Object.assign({},e,{response:t.lastResponse}):"SET_CURRENT_TRACK"==t.type?Object.assign({},e,{currentTrack:t.currentTrack}):"SET_CURRENT_PLAYTIME"==t.type?Object.assign({},e,{currentPlaytime:t.currentPlaytime}):"SET_WAVEFORM_COLOR"==t.type?Object.assign({},e,{waveformPercentage:t.waveformPercentage}):e}),Object(w.composeWithDevTools)(Object(O.applyMiddleware)(j.a)));var k=function(){return c.a.createElement(m.a,{store:C},c.a.createElement("div",{className:"container-main"},c.a.createElement(g,null),c.a.createElement(y,null)))};p.a.get("http://api.createmusic.com/search?search=a").then((function(e){var t=e.data;console.log(t)})),l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.42f0b05c.chunk.js.map