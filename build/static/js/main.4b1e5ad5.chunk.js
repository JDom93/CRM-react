(this["webpackJsonpcreate-music-codingtest"]=this["webpackJsonpcreate-music-codingtest"]||[]).push([[0],{23:function(e){e.exports=JSON.parse('{"ProductionType":["Background","Commercials","Corporate","Nature","Product Videos","Travel"],"Keyword":["Building","Calm","Emotional","Energetic","Gentle","Hopeful","Inspirational","Motivating","Positive","Reflective","Soft","Triumphant","Uplifting"],"Alben":["On The Rise"],"Instrument":["Bass (Electric)","Brass","Drums","Guitar (Electric)","Percussion","Piano","Strings","Synthesizer"],"Style":["Building","Corporate/Technology","Filmmusic","Transportation"]}')},26:function(e,t,n){e.exports=n(59)},54:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),l=n.n(c),i=n(5),s=n.n(i),o=n(9),u=n(3),m=n(1);function f(e){return{type:"SET_CURRENT_PLAYTIME",currentPlaytime:e}}var E=n(23),p=function(e){var t=e.filters,n=e.findMusic,a=e.setQuery;if(!t)return console.log("no filters"),null;var c=t.Alben,l=t.Instrument,i=t.Keyword,s=t.ProductionType,o=t.Style;return r.a.createElement("div",{id:"suggestions",className:"search-suggestions"},i&&0!=i.length&&r.a.createElement("div",{className:"suggestion",id:"keywords"},r.a.createElement("h3",null,"Keywords"),r.a.createElement("ul",{id:"list-keywords"},i.slice(0,15).map((function(e){return r.a.createElement("li",{className:"suggestion-item",key:e,onClick:function(e){n(e,e.target.textContent),a(e.target.textContent)}},e)})))),c&&0!=c.length&&r.a.createElement("div",{className:"suggestion",id:"albums"},r.a.createElement("h3",null,"Albums"),r.a.createElement("ul",{id:"list-albums"},c.slice(0,15).map((function(e){return r.a.createElement("li",{className:"suggestion-item",key:e,onClick:function(e){n(e,e.target.textContent),a(e.target.textContent)}},e)})))),l&&0!=l.length&&r.a.createElement("div",{className:"suggestion",id:"instruments"},r.a.createElement("h3",null,"Instruments"),r.a.createElement("ul",{id:"list-instruments"},l.slice(0,15).map((function(e){return r.a.createElement("li",{className:"suggestion-item",key:e,onClick:function(e){n(e,e.target.textContent),a(e.target.textContent)}},e)})))),o&&0!=o.length&&r.a.createElement("div",{className:"suggestion",id:"styles"},r.a.createElement("h3",null,"Styles"),r.a.createElement("ul",{id:"list-styles"},o.slice(0,15).map((function(e){return r.a.createElement("li",{className:"suggestion-item",key:e,onClick:function(e){n(e,e.target.textContent),a(e.target.textContent)}},e)})))),s&&0!=s.length&&r.a.createElement("div",{className:"suggestion",id:"production"},r.a.createElement("h3",null,"Production"),r.a.createElement("ul",{id:"list-productions"},s.slice(0,15).map((function(e){return r.a.createElement("li",{className:"suggestion-item",key:e,onClick:function(e){n(e,e.target.textContent),a(e.target.textContent)}},e)})))))},d=n(7),g=n.n(d),v=function(){var e=Object(m.b)(),t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],l=n[1],i=Object(a.useState)(null),f=Object(u.a)(i,2),d=f[0],v=f[1],y=Object(a.useState)(0),h=Object(u.a)(y,2),b=h[0],O=h[1];Object(a.useEffect)((function(){var e=!1;function t(){return(t=Object(o.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,g.a.get("https://api.createmusic.com/search?search=".concat(c,"&mutliLayerOnly=").concat(b));case 4:n=t.sent,a=n.data.filters,e||v(a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}}),[c,b]);var N=function(){var t=Object(o.a)(s.a.mark((function t(n,a){var r,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),!a&&c&&(a=c),a||c||v(E),t.next=5,g.a.get("https://api.createmusic.com/search?search=".concat(a,"&mutliLayerOnly=").concat(b));case 5:r=t.sent,(l=r.data)&&e({type:"STORE_RESPONSE",lastResponse:l});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return r.a.createElement("aside",{className:"container-search"},r.a.createElement("div",{className:"search-tool"},r.a.createElement("h3",null,"Search Music"),r.a.createElement("form",{id:"search-form",onSubmit:N},r.a.createElement("input",{autocomplete:"off",type:"text",id:"search-input",value:c,onChange:function(e){l(e.target.value)}}),r.a.createElement("label",{for:"multilayer",className:"checkbox-label"},r.a.createElement("input",{type:"checkbox",name:"multilayer",id:"multilayer",onChange:function(e){var t=e.target.checked?1:0;O(t)}}),r.a.createElement("span",{className:"checkbox"}),"Multilayer"),d&&r.a.createElement(p,{filters:d,findMusic:N,setQuery:l}))))},y=function(e){var t=e.track,n=Object(m.b)(),c=Object(a.useRef)(null),l=Object(m.c)((function(e){return e.currentPlaytime})),i=Object(m.c)((function(e){return e.currentTrack||{}})),s=Object(m.c)((function(e){return e.waveformPercentage})),o=Object(a.useState)(0),E=Object(u.a)(o,2),p=E[0],d=E[1];Object(a.useEffect)((function(){if(t.cueID!=i.cueID)return d(0);if(c){c.current.getBoundingClientRect();d(s)}}),[i,l,s]);return r.a.createElement("div",{className:"content-result"},r.a.createElement("div",{className:"content-description"},r.a.createElement("h3",null,t.cueName),r.a.createElement("p",null,t.albumName)),r.a.createElement("div",{onClick:function(e){var a=c.current.getBoundingClientRect(),r=e.clientX-a.left;n(function(e){return{type:"SET_CURRENT_TRACK",currentTrack:e}}(t)),n(f(100*r/a.width))},className:"content-waveform-container",ref:c},r.a.createElement("img",{class:"content-waveform",src:t.waveformPreview,alt:"waveform",style:{clipPath:"inset(0 0 0 ".concat(p,"%)")}}),r.a.createElement("img",{class:"content-waveform-overlay",src:t.waveformPreview,alt:"",style:{clipPath:"inset(0 ".concat(100-p,"% 0 0)")}})),r.a.createElement("p",{className:"content-tags"},t.cueStyles.join(", ")))},h=function(){var e=Object(m.c)((function(e){return e.response&&e.response.cueData})),t=Object(m.c)((function(e){return e.response&&e.response.searchCueIDs})),n=Object(a.useState)([]),c=Object(u.a)(n,2),l=c[0],i=c[1];return Object(a.useEffect)((function(){if(t){var n=t.slice(0,50).map((function(t){return e[t]}));i(n)}}),[t]),r.a.createElement("main",{id:"content-results",className:"content-results"},l&&l.map((function(e){return r.a.createElement(y,{track:e})})))},b=function(){var e=Object(m.b)(),t=Object(a.useRef)({}),n=Object(a.useRef)({}),c=Object(m.c)((function(e){return e.currentTrack})),l=Object(m.c)((function(e){return e.currentPlaytime||0})),i=Object(a.useState)(0),s=Object(u.a)(i,2),o=s[0],E=s[1],p=Object(a.useState)(!1),d=Object(u.a)(p,2),g=d[0],v=d[1];Object(a.useEffect)((function(){var e=n.current;e&&c&&(e.currentTime=c.fullDuration*(l/100)/1e3,E(l))}),[l,n.current,c]),Object(a.useEffect)((function(){var t=n.current;if(t&&c){function a(){t.pause(),t.currentTime=0}function r(){v(!0)}function l(){var n=100*t.currentTime*1e3/c.fullDuration;console.log("percentage played",n),E(n),e({type:"SET_WAVEFORM_COLOR",waveformPercentage:n})}return t.addEventListener("ended",a),t.addEventListener("play",r),t.addEventListener("timeupdate",l),function(){t.removeEventListener("ended",a),t.removeEventListener("play",r),t.removeEventListener("timeupdate",l)}}}),[n,c]);return r.a.createElement("div",{id:"content-player",className:"content-player"},r.a.createElement("div",{className:"content-player-button"},r.a.createElement("i",{onClick:function(){if(c){var e=n.current;g?(v(!1),e.pause()):(v(!0),e.play())}},id:"audio-play",className:g?"far fa-pause-circle fa-2x":"far fa-play-circle fa-2x"}),r.a.createElement("i",{onClick:function(){g&&(v(!1),n.current.pause(),n.current.currentTime=0)},id:"audio-stop",className:"far fa-stop-circle fa-2x",style:g?{color:"var(--color-text)"}:{color:"var(--color-light)"}})),c&&r.a.createElement("div",{onClick:function(n){var a=t.current.getBoundingClientRect(),r=n.clientX-a.left;e(f(100*r/a.width))},className:"content-waveform-container",ref:t},r.a.createElement("img",{class:"content-waveform",src:c.waveformPreview,alt:"waveform",style:{clipPath:"inset(0 0 0 ".concat(o,"%)")}}),r.a.createElement("img",{class:"content-waveform-overlay",src:c.waveformPreview,alt:"",style:{clipPath:"inset(0 ".concat(100-o,"% 0 0)")}}),r.a.createElement("audio",{autoplay:"true",src:c.fullLengthPreview,ref:n})))},O=function(){return r.a.createElement("div",{className:"container-content"},r.a.createElement("nav",null,r.a.createElement("div",{class:"logo-wrapper"},r.a.createElement("img",{className:"logo-image",src:"https://www.createmusic.com/wp-content/themes/Avada-Child-Theme/images/CM-logo-final-white_wide.svg",alt:"CREATE MUSIC APP"})),r.a.createElement("ul",{className:"menu-profile"},r.a.createElement("li",{id:"login"},"Login"),r.a.createElement("li",{id:"menu"},"Menu"),r.a.createElement("li",{id:"icon"},r.a.createElement("i",{className:"fas fa-user-circle fa-2x"})))),r.a.createElement("section",{className:"content-main"},r.a.createElement("header",{className:"content-filter"},r.a.createElement("h3",null,"Search Results ",r.a.createElement("span",{id:"num-results"})),r.a.createElement("ul",{id:"content-filters",className:"content-filter-list"},r.a.createElement("li",{className:"filter-active",id:"filter-tracks"},"Tracks"),r.a.createElement("li",{id:"filter-albums"},"Albums"),r.a.createElement("li",{id:"filter-favorites"},"Favorites"),r.a.createElement("li",{id:"filter-playlists"},"Playlists"))),r.a.createElement("hr",{className:"content-separator"}),r.a.createElement(h,null),r.a.createElement("hr",{className:"content-separator"}),r.a.createElement(b,null)))},N=(n(54),n(4)),j=n(24),w=n.n(j),C=n(25),T=Object(N.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"STORE_RESPONSE"==t.type?Object.assign({},e,{response:t.lastResponse}):"SET_CURRENT_TRACK"==t.type?Object.assign({},e,{currentTrack:t.currentTrack}):"SET_CURRENT_PLAYTIME"==t.type?Object.assign({},e,{currentPlaytime:t.currentPlaytime}):"SET_WAVEFORM_COLOR"==t.type?Object.assign({},e,{waveformPercentage:t.waveformPercentage}):e}),Object(C.composeWithDevTools)(Object(N.applyMiddleware)(w.a)));var k=function(){return r.a.createElement(m.a,{store:T},r.a.createElement("div",{className:"container-main"},r.a.createElement(v,null),r.a.createElement(O,null)))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.4b1e5ad5.chunk.js.map